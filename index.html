<style>
  /*.line-canvas {
    height: 100px;
    width: 100px;
    position: absolute;   // Declared as static
  }*/
</style>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

  </head>
  <body>

    <canvas id="line0.0-0" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line0.1-1" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line0.2-2" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line0.3-3" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line0.4-4" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line0.5-5" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>

    <canvas id="line1.0-6" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line1.1-7" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line1.2-8" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line1.3-9" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line1.4-10" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line1.5-11" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>

    <canvas id="line2.0-12" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line2.1-13" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line2.2-14" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line2.3-15" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line2.4-16" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line2.5-17" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>

    <canvas id="line3.0-18" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line3.1-19" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line3.2-20" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line3.3-21" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line3.4-22" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line3.5-23" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>

    <canvas id="line4.0-24" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line4.1-25" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line4.2-26" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line4.3-27" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line4.4-28" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line4.5-29" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>

    <canvas id="line5.0-30" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line5.1-31" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line5.2-32" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line5.3-33" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line5.4-34" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>
    <canvas id="line5.5-35" height="100px" width="100px" style="border:0px solid #d3d3d3;"></canvas>

  </body>

</html>


<script>
  // CANVAS, LINE, AND MOUSE FUNCTIONS

  function lineStruct(canvasID, xpos, ypos) {
    this.canvasID = canvasID;
    this.xpos = xpos;
    this.ypos = ypos;
  }

  let canvasWidth = 100;
  let canvasHeight = 100;
  let numRows = 6;
  let numCols = 6;

  let linesArr = [];

  // returns the index of the element at row, col
  function getIndex(r, c) {
    return r * numCols + c;
  }

  // populate linesArr
  for (let r=0; r<numRows; r++) {
    for (let c=0; c<numCols; c++) {
      newID = "line" + r + "." + c + "-" + getIndex(r, c);
      newLineStruct = new lineStruct(newID, 0, 0);
      linesArr.push(newLineStruct);
    }
  }

  // sets the position of every canvas on the window
  function setCanvasPositions() {
    for (let r=0; r<numRows; r++) {
      for (let c=0; c<numCols; c++) {
        let index = getIndex(r, c);

        let can = document.getElementById(linesArr[index].canvasID);
        let xpos1 = c*canvasWidth;
        let xString = xpos1.toString();
        let ypos1 = r*canvasHeight;
        let yString = ypos1.toString();
        can.style.top = yString+"px";
        can.style.left = xString+"px";
        can.style.position = "absolute";

        linesArr[index].xpos = xpos1;
        linesArr[index].ypos = ypos1;
      }
    }
  }

  // initialize/reset the canvas
  function initCanvas(c, ctx) {
    ctx.clearRect(0, 0, 200, 100);
    ctx.beginPath();
  }

  let mouseX;
  let mouseY;

  // Retrieve the mouse coordinates
  document.addEventListener("mousemove", (event) => {
    mouseX = event.clientX;
    mouseY = event.clientY;
  });

  // LINE FUNCTIONS

  function drawLine(lStruct, color, lineWid, x1, y1, x2, y2) {
    let c = document.getElementById(lStruct.canvasID);
    let ctx = c.getContext("2d");
    initCanvas(c, ctx);
    ctx.strokeStyle = color;
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.lineWidth = lineWid;
    ctx.stroke();
  }

  function getRainbowLineColor0(mouseX, mouseY) {
    let col = "rgb(" + mouseX + "," + mouseY + ", 100)";

    return col;    
  }

  function getRainbowLineColor1(lStruct, mouseX, mouseY) {
    // retrieve the canvas ID of given lStruct
    // parse to retrieve index value
    // multiply index value by 7
    // add composition of mouseX and mouseY to that value
  }

  function pointToCursor0(lStruct) {
    let topLeftX = lStruct.xpos;
    let topLeftY = lStruct.ypos;
    let bottomRightX = topLeftX + canvasWidth;
    let bottomRightY = topLeftY + canvasHeight;

    let x1 = mouseX - topLeftX;
    let y1 = mouseY - topLeftY;
    let x2 = bottomRightX - mouseX;
    let y2 = bottomRightY - mouseY;

    let color = getRainbowLineColor0(mouseX, mouseY);
    drawLine(lStruct, color, 8, x1, y1, x2, y2);
  }

  function pointToCursor1(lStruct) { // error when I was making pointToCursor but it might be cool
    let topLeftX = lStruct.xpos;
    let topLeftY = lStruct.ypos;

    let x1 = mouseX - topLeftX;
    let y1 = mouseY - topLeftY;
    let x2 = canvasWidth - x1;
    let y2 = canvasHeight - x2;

    let color = getRainbowLineColor0(mouseX, mouseY);
    drawLine(lStruct, color, 8, x1, y1, x2, y2);
  }


  // IMPLEMENT DRAW LOOP
  const sleep = (ms) => {
		return new Promise(resolve => setTimeout(resolve, ms));
	}

	const draw = async() => {
		while(true)
		{
			await sleep(20);

      for (let i=0; i<numRows*numCols; i++) {
        pointToCursor0(linesArr[i]);
        // pointToCursor1(linesArr[i]);
      }

		}
	}

  setCanvasPositions();
  console.log(linesArr);
  draw();

</script>
